basePath: /
definitions:
  core.ErrResponse:
    properties:
      message:
        type: string
      metadata:
        additionalProperties:
          type: string
        type: object
      reason:
        type: string
    type: object
  v1.AuthProviderBrief:
    properties:
      authUrl:
        description: Auth URL
        type: string
      isDefault:
        description: Is default provider, 0-not, 1-yes
        type: integer
      name:
        description: Auth provider name
        type: string
      redirectUrl:
        description: Redirect URL
        type: string
    type: object
  v1.BindingInfo:
    properties:
      accountId:
        type: string
      avatar:
        type: string
      bindTime:
        type: string
      provider:
        type: string
      username:
        type: string
    type: object
  v1.ChangePasswordRequest:
    properties:
      passwordNew:
        maxLength: 18
        minLength: 6
        type: string
      passwordOld:
        maxLength: 18
        minLength: 6
        type: string
    required:
    - passwordNew
    - passwordOld
    type: object
  v1.ChannelPreference:
    properties:
      email:
        type: boolean
      in_app:
        type: boolean
    type: object
  v1.GetAuthCodeResponse:
    properties:
      authUrl:
        description: OAuth authorization URL
        type: string
      codeVerifier:
        description: PKCE code verifier (if PKCE enabled)
        type: string
      state:
        description: State parameter
        type: string
    type: object
  v1.GetPreferencesResponse:
    properties:
      preferences:
        $ref: '#/definitions/v1.NotificationPreferences'
    type: object
  v1.HealthzResponse:
    properties:
      status:
        type: string
    type: object
  v1.ListNotificationsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/v1.NotificationItem'
        type: array
      total:
        type: integer
    type: object
  v1.LoginByProviderRequest:
    properties:
      code:
        description: Auth code
        type: string
      codeVerifier:
        description: PKCE code verifier
        type: string
      state:
        description: State for CSRF protection
        type: string
    type: object
  v1.LoginRequest:
    properties:
      account:
        maxLength: 255
        minLength: 5
        type: string
      password:
        maxLength: 18
        minLength: 6
        type: string
      platform:
        description: WebSocket 登录时必填
        type: string
    required:
    - account
    - password
    type: object
  v1.LoginResponse:
    properties:
      accessToken:
        type: string
      expiresAt:
        type: string
      requireTotp:
        description: 是否需要 TOTP 验证
        type: boolean
      totpToken:
        description: 两步登录临时 Token
        type: string
    type: object
  v1.NonceResponse:
    properties:
      nonce:
        description: Nonce
        type: string
    type: object
  v1.NotificationItem:
    properties:
      actionUrl:
        type: string
      category:
        type: string
      content:
        type: string
      createdAt:
        type: string
      isRead:
        type: boolean
      source:
        description: '"message" or "announcement"'
        type: string
      title:
        type: string
      type:
        type: string
      uuid:
        type: string
    type: object
  v1.NotificationPreferences:
    properties:
      security:
        $ref: '#/definitions/v1.ChannelPreference'
      social:
        $ref: '#/definitions/v1.ChannelPreference'
      system:
        $ref: '#/definitions/v1.ChannelPreference'
      transaction:
        $ref: '#/definitions/v1.ChannelPreference'
    type: object
  v1.RegisterRequest:
    properties:
      account:
        maxLength: 255
        minLength: 5
        type: string
      code:
        description: 验证码（验证开启时必填）
        type: string
      nickname:
        maxLength: 255
        minLength: 2
        type: string
      password:
        maxLength: 18
        minLength: 6
        type: string
    required:
    - account
    - password
    type: object
  v1.ResetPasswordRequest:
    properties:
      account:
        maxLength: 255
        minLength: 5
        type: string
      code:
        type: string
      password:
        maxLength: 18
        minLength: 6
        type: string
    required:
    - account
    - code
    - password
    type: object
  v1.SecurityStatusResponse:
    properties:
      payPasswordSet:
        type: boolean
      totpEnabled:
        type: boolean
    type: object
  v1.SendCodeRequest:
    properties:
      account:
        maxLength: 255
        minLength: 5
        type: string
      scene:
        enum:
        - register
        - reset_password
        - bind
        - security
        type: string
    required:
    - account
    - scene
    type: object
  v1.SetPayPasswordRequest:
    properties:
      code:
        example: "123456"
        type: string
      loginPassword:
        example: "123456"
        type: string
      payPassword:
        example: "654321"
        minLength: 6
        type: string
      totpCode:
        example: "123456"
        type: string
    required:
    - code
    - payPassword
    type: object
  v1.TOTPDisableRequest:
    properties:
      totpCode:
        example: "123456"
        type: string
      verifyCode:
        example: "123456"
        type: string
    required:
    - totpCode
    - verifyCode
    type: object
  v1.TOTPEnableRequest:
    properties:
      code:
        example: "123456"
        type: string
    required:
    - code
    type: object
  v1.TOTPSetupResponse:
    properties:
      otpauthUrl:
        type: string
      secret:
        type: string
    type: object
  v1.TOTPStatusResponse:
    properties:
      enabled:
        type: boolean
    type: object
  v1.TOTPVerifyRequest:
    properties:
      code:
        example: "123456"
        type: string
    required:
    - code
    type: object
  v1.UnreadCountResponse:
    properties:
      count:
        type: integer
    type: object
  v1.UpdatePreferencesRequest:
    properties:
      preferences:
        $ref: '#/definitions/v1.NotificationPreferences'
    required:
    - preferences
    type: object
  v1.UpdateProfileRequest:
    properties:
      avatar:
        maxLength: 255
        type: string
      code:
        type: string
      email:
        type: string
      nickname:
        maxLength: 255
        minLength: 2
        type: string
      phone:
        maxLength: 11
        minLength: 11
        type: string
    type: object
  v1.UserInfo:
    properties:
      age:
        type: integer
      avatar:
        type: string
      countryCode:
        type: string
      createdAt:
        type: string
      email:
        type: string
      gender:
        type: string
      googleStatus:
        type: string
      inviteCount:
        type: integer
      kycStatus:
        description: KYC status, 0-not verify, 1-pending, 2-verified, 3-failed
        type: integer
      nickname:
        type: string
      payPassword:
        type: boolean
      phone:
        type: string
      pid:
        type: integer
      status:
        description: Status, 1-enabled, 2-disabled
        type: integer
      uid:
        type: string
      updatedAt:
        type: string
      username:
        type: string
    type: object
  v1.VerifyPayPasswordRequest:
    properties:
      payPassword:
        example: "654321"
        type: string
    required:
    - payPassword
    type: object
  version.Info:
    properties:
      buildDate:
        type: string
      compiler:
        type: string
      gitCommit:
        type: string
      gitTreeState:
        type: string
      gitVersion:
        type: string
      goVersion:
        type: string
      platform:
        type: string
    type: object
info:
  contact: {}
  title: API Docs
  version: "1.0"
paths:
  /healthz:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.HealthzResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      summary: Heath check
      tags:
      - Common
  /v1/auth/bindings:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/v1.BindingInfo'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: List social account bindings
      tags:
      - Auth
  /v1/auth/bindings/{provider}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Unbind social account
      tags:
      - Auth
    post:
      consumes:
      - application/json
      parameters:
      - description: Auth provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.LoginByProviderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Bind provider
      tags:
      - Auth
  /v1/auth/change-password:
    put:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Change password
      tags:
      - Auth
  /v1/auth/code:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.SendCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      summary: Send verification code
      tags:
      - Auth
  /v1/auth/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Login
      tags:
      - Auth
  /v1/auth/login/{provider}:
    get:
      consumes:
      - application/json
      parameters:
      - description: Auth provider name
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.GetAuthCodeResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get OAuth authorization URL
      tags:
      - Auth
    post:
      consumes:
      - application/json
      parameters:
      - description: Auth provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.LoginByProviderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Login by provider
      tags:
      - Auth
  /v1/auth/login/address:
    post:
      consumes:
      - application/json
      parameters:
      - description: ETH Address
        in: query
        name: address
        required: true
        type: string
      - description: Signature
        in: query
        name: sign
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Login by provider
      tags:
      - Auth
  /v1/auth/nonce:
    get:
      consumes:
      - application/json
      parameters:
      - description: ETH Address
        in: query
        name: address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.NonceResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get Address auth nonce
      tags:
      - Auth
  /v1/auth/providers:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/v1.AuthProviderBrief'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get auth providers
      tags:
      - Auth
  /v1/auth/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Register
      tags:
      - Auth
  /v1/auth/reset-password:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      summary: Reset password
      tags:
      - Auth
  /v1/auth/security/pay-password:
    put:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.SetPayPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Set pay password
      tags:
      - Security
  /v1/auth/security/status:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.SecurityStatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get security status
      tags:
      - Security
  /v1/auth/security/totp/disable:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.TOTPDisableRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Disable TOTP
      tags:
      - Security
  /v1/auth/security/totp/enable:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.TOTPEnableRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Enable TOTP (verify code and enable)
      tags:
      - Security
  /v1/auth/security/totp/setup:
    post:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.TOTPSetupResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Setup TOTP (get secret and QR code URL)
      tags:
      - Security
  /v1/auth/security/totp/status:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.TOTPStatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get TOTP status
      tags:
      - Security
  /v1/auth/security/totp/verify:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.TOTPVerifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Verify TOTP code
      tags:
      - Security
  /v1/auth/security/verify-pay-password:
    post:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.VerifyPayPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Verify pay password
      tags:
      - Security
  /v1/auth/user:
    put:
      consumes:
      - application/json
      parameters:
      - description: Param
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Update user profile
      tags:
      - Auth
  /v1/auth/user-info:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.UserInfo'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get user info
      tags:
      - Auth
  /v1/file/upload:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: File
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Upload file
      tags:
      - File
  /v1/notifications:
    get:
      consumes:
      - application/json
      parameters:
      - description: Filter by category
        in: query
        name: category
        type: string
      - description: Filter by read status
        in: query
        name: is_read
        type: boolean
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Page size
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.ListNotificationsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: List notifications
      tags:
      - Notification
  /v1/notifications/{uuid}:
    delete:
      parameters:
      - description: Notification UUID
        in: path
        name: uuid
        required: true
        type: string
      responses:
        "200":
          description: OK
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Delete notification
      tags:
      - Notification
  /v1/notifications/{uuid}/read:
    put:
      parameters:
      - description: Notification UUID
        in: path
        name: uuid
        required: true
        type: string
      responses:
        "200":
          description: OK
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Mark notification as read
      tags:
      - Notification
  /v1/notifications/preferences:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.GetPreferencesResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get notification preferences
      tags:
      - Notification
    put:
      consumes:
      - application/json
      parameters:
      - description: Preferences
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/v1.UpdatePreferencesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Update notification preferences
      tags:
      - Notification
  /v1/notifications/read-all:
    put:
      responses:
        "200":
          description: OK
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Mark all notifications as read
      tags:
      - Notification
  /v1/notifications/unread-count:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/v1.UnreadCountResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      security:
      - Bearer: []
      summary: Get unread notification count
      tags:
      - Notification
  /version:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/version.Info'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/core.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/core.ErrResponse'
      summary: Get App Version
      tags:
      - Common
securityDefinitions:
  Bearer:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
